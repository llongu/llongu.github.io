!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){var i;(i=window.foods=function(){this.foodsNumArr=[{effect:"drag",src:imgObj.foods1},{effect:"normal",src:imgObj.foods2},{effect:"normal",src:imgObj.foods3},{effect:"normal",src:imgObj.foods4},{effect:"normal",src:imgObj.foods5},{effect:"normal",src:imgObj.foods6},{effect:"normal",src:imgObj.foods7},{effect:"fast",src:imgObj.foods8}],this.foodsNum=parseInt(Math.random()*this.foodsNumArr.length),this.image=this.foodsNumArr[this.foodsNum].src,this.w=60,this.h=60,this.coordinate=function(){var t=game.obstacle.Wleft/1.5+Math.random()*game.canvas.width,e=-game.canvas.height;return t+this.w>game.canvas.width&&(t-=game.canvas.width/1.2),(t+this.w>game.obstacle.Wleft+game.obstacle.interspace||t<game.obstacle.Wleft)&&(e=game.obstacle.y-1.5*this.h),{xNum:t,yNum:e}},this.xycoordinate=this.coordinate(),this.x=this.xycoordinate.xNum,this.y=this.xycoordinate.yNum,this.speed=game.speed,game.foodsArr.push(this)}).prototype.updata=function(){if(this.y+=this.speed,game.people.x+game.people.w>this.x&&game.people.x<this.x+this.w&&game.people.y+game.people.h>this.y&&game.people.y<this.y+this.h){for(var t=0;t<game.foodsArr.length;t++)game.foodsArr[t]===this&&game.foodsArr.splice(t,1);game.socre++,this.effect(this.foodsNum)}if(this.y>game.canvas.height)for(t=0;t<game.foodsArr.length;t++)game.foodsArr[t]===this&&game.foodsArr.splice(t,1)},i.prototype.drawing=function(){game.ctx.fillStyle="#fff",game.ctx.font="20px 微软雅黑",game.ctx.fillText("分数：  "+game.socre+"  拖拽时间： "+game.people.dragtime,20,20),game.ctx.drawImage(this.image,this.x,this.y,this.w,this.h)},i.prototype.effect=function(t){switch(this.foodsNumArr[t].effect){case"drag":game.people.dragtime+=5,game.people.dragSwitchs=!0,clearInterval(game.people.dragtimer),game.people.dragtimer=setInterval(function(){game.people.dragtime--,game.people.dragtime<=0&&(game.people.dragSwitchs=!1,game.people.sensorSwitchs=!0,clearInterval(game.people.dragtimer))},1e3);break;case"fast":game.speed+=1}}},function(t,e){var i;(i=window.people=function(){this.image=imgObj.people,this.w=74,this.h=90,this.x=game.canvas.width/2-24,this.y=game.canvas.height/2,this.dragSwitchs=!1,this.sensorSwitchs=!0,this.flySwitchs=!0,this.dragtimer="",this.dragtime=0,this.speed=0}).prototype.updata=function(){this.sensorSwitchs&&(this.flySwitchs?this.y+=.2*this.speed:(this.speed=-25,this.flySwitchs=!0),this.speed++,this.testwll())},i.prototype.drawing=function(){game.ctx.drawImage(this.image,this.x,this.y,this.w,this.h)},i.prototype.moveing=function(){var t,e,i=this;this.Drawstart=function(s){s.preventDefault(),1==s.touches.length&&(s.touches[0].pageX>i.x&&s.touches[0].pageX<i.x+i.w&&s.touches[0].pageY>i.y&&s.touches[0].pageY<i.y+i.h?(t=parseInt(s.touches[0].pageX-i.x),e=parseInt(s.touches[0].pageY-i.y),game.canvas.addEventListener("touchmove",i.Drawmove,!1),game.canvas.addEventListener("touchend",i.Drawend,!1)):i.fly())},this.Drawmove=function(s){i.dragSwitchs&&!game.die&&(i.sensorSwitchs=!1,i.x=s.touches[0].pageX-t,i.y=s.touches[0].pageY-e,i.drawing())},this.Drawend=function(t){game.canvas.removeEventListener("touchmove",i.Drawmove,!1),i.sensorSwitchs=!0},game.canvas.addEventListener("touchstart",i.Drawstart,!1)},i.prototype.sensor=function(){var t=this;this.DeviceOrientationHandler=function(e){if(t.sensorSwitchs&&!game.die){var i=e.accelerationIncludingGravity;is_IOS()?t.x+=i.x+.1:t.x-=i.x+.1,t.testwll(),t.drawing()}},window&&window.DeviceOrientationEvent?window.addEventListener("devicemotion",t.DeviceOrientationHandler,!1):alert("你收不支持DeviceOrientationEvent")},i.prototype.fly=function(){this.flySwitchs=!1,this.speed=0},i.prototype.testwll=function(){this.x<=0&&(this.x=0),this.x+this.w>=game.canvas.width&&(this.x=game.canvas.width-this.w),this.y<=0&&(this.y=0),this.y>game.canvas.height&&game.over()}},function(t,e){var i;(i=window.obstacle=function(){var t="obstacle"+Math.ceil(6*Math.random());this.image=imgObj[t],this.w=700,this.h=40,this.interspace=200,this.Wleft=10+parseInt(Math.random()*((game.canvas.width-this.interspace)/1.5)),this.Wright=game.canvas.width-(this.Wleft+this.interspace),this.xleft=this.w-this.Wleft,this.xright=this.Wleft+this.interspace,this.y=-game.canvas.height,this.speed=game.speed,game.obArr.push(this)}).prototype.updata=function(){if(this.y+=this.speed,(game.people.x<this.Wleft||game.people.x+game.people.w>this.Wleft+this.interspace)&&game.people.y+game.people.h>this.y&&game.people.y<this.y+this.h&&game.over(),this.y>game.canvas.height)for(var t=0;t<game.obArr.length;t++)game.obArr[t]===this&&game.obArr.splice(t,1)},i.prototype.drawing=function(){game.ctx.drawImage(this.image,-this.xleft,this.y,this.w,this.h),game.ctx.drawImage(this.image,this.xright,this.y,this.w,this.h)}},function(t,e){var i;(i=window.Background=function(){this.image=imgObj.bg,this.x=0,this.y=0,this.w=game.canvas.width,this.h=game.canvas.height,this.speed=1}).prototype.updata=function(){this.y+=this.speed,this.y>=this.h&&(this.y=0)},i.prototype.drawing=function(){game.ctx.drawImage(this.image,this.x,this.y,this.w,this.h),game.ctx.drawImage(this.image,this.x,this.y-this.h,this.w,this.h)}},function(t,e){var i;(i=window.game=function(t){this.canvas=document.getElementById(t.id),this.ctx=this.canvas.getContext("2d"),this.init(),this.obArr=[],this.foodsArr=[],this.speed=5,this.fn=0,this.socre=0,this.die=!1}).prototype.init=function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;t>768?t=768:t<320&&(t=320),e>1366?e=1366:e<500&&(e=500),this.canvas.width=t,this.canvas.height=e},i.prototype.start=function(){var t=this;this.Bg=new Background,this.people=new people,this.people.moveing(),this.people.sensor(),function e(){timer=requestAnimFrame(e),t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.fn++,t.Bg.updata(),t.Bg.drawing(),t.people.updata(),t.people.drawing();for(var i=0;i<t.obArr.length;i++)t.obArr[i].speed=t.speed,t.obArr[i].updata(),t.obArr[i].drawing();for(var i=0;i<t.foodsArr.length;i++)t.foodsArr[i].speed=t.speed,t.foodsArr[i].updata(),t.foodsArr[i].drawing();t.fn%40==0&&(t.obstacle=new obstacle,new foods)}()},i.prototype.over=function(){this.die=!0,window.cancelAnimationFrame(timer),this.ctx.fillStyle="#fff",this.ctx.font="30px 微软雅黑",this.ctx.textAlign="center",this.ctx.fillText("Game Over",this.canvas.width/2,this.canvas.height/1.8),setTimeout(function(){window.location.reload()},2e3)}},function(t,e,i){"use strict";i.r(e);i(4),i(3),i(2),i(1),i(0)}]);