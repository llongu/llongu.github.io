<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-control" content="no-cache">
	<meta http-equiv="Cache" content="no-cache">
	<title>Document</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		body,html{
			width: 100%;
			height: 100%;
			position: relative;
			overflow: hidden;
		}
		.wrap{
			overflow: hidden;
			margin: 0 !important;
			display: none;
		}
		#mycanvas{
			border: 1px solid #000;
			box-sizing: border-box;
			background: url(img/bg.jpg) no-repeat;
			background-size: 100% 100%;
		}
		#begin{
			padding: 15px;
			font-size: 26px;
			color: #fff;
			text-align: center;
			margin: 0 auto;
			position: absolute;
			left:50%;
			transform: translateX(-50%);
			top: 45%;
			border: 2px solid #fff;
			border-radius: 5px;
			
		}
	</style>
</head>
<body>
	<div class="wrap">
		<div id="begin">狂点屏幕</div>
	<canvas id="mycanvas">你的浏览不支持canvas</canvas>
	</div>
	<audio src="audio/music.mp3" preload="auto" loop="loop" ></audio>
</body>

	<script src="js/main.js"></script>
	<script>
		
	window.requestAnimFrame = (function() {
		return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
			function(callback) {
				window.setTimeout(callback, 1000 / 60);
			};
	})();



			var game,imgArr,imgObj={},imgNum=0,timer;
			
			var imgArr=[
					{"name":"bg","url":"./img/bg.jpg"},
					{"name":"obstacle1","url":"./img/obstacle1.png"},
					{"name":"obstacle2","url":"./img/obstacle2.png"},
					{"name":"obstacle3","url":"./img/obstacle3.png"},
					{"name":"obstacle4","url":"./img/obstacle4.png"},
					{"name":"obstacle5","url":"./img/obstacle5.png"},
					{"name":"obstacle6","url":"./img/obstacle6.png"},
					{"name":"people","url":"./img/people.png"},
					{"name":"foods1","url":"./img/food1.png"},
					{"name":"foods2","url":"./img/food2.png"},
					{"name":"foods3","url":"./img/food3.png"},
					{"name":"foods4","url":"./img/food4.png"},
					{"name":"foods5","url":"./img/food5.png"},
					{"name":"foods6","url":"./img/food6.png"},
					{"name":"foods7","url":"./img/food7.png"},
					{"name":"foods8","url":"./img/food8.png"}
				]
			
			game=new game({
					"id":"mycanvas"
				});
			document.getElementById('begin').addEventListener('click',function(){
				this.style.display='none';
				document.getElementsByTagName('audio')[0].play();
				//开始游戏
				game.start()
				
			})
			preload(function(){
				document.getElementsByClassName('wrap')[0].style.display='block';
			})
			
			function preload(callback){
				//图片加载
				for(var i=0;i<imgArr.length;i++){
					imgObj[imgArr[i].name]=new Image();
					imgObj[imgArr[i].name].src=imgArr[i].url;
					imgObj[imgArr[i].name].onload=function(){
						imgNum++;
						if(imgNum==imgArr.length){
							callback();
						}
					}
				}
			}
			
			function is_IOS(){
				var u = navigator.userAgent;
				var _isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); // ios终端
				// alert("iOS " + _isIOS);
				return _isIOS;
			}
	</script>
</html>